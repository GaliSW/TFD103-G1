<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>news</title>
    <link rel="stylesheet" type="text/css" href="../js/vendor/slick-1.8.1/slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="../js/vendor/slick-1.8.1/slick/slick.css" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css"
        integrity="sha384-jLKHWM3JRmfMU0A5x5AkjWkw/EYfGUAGagvnfryNV3F9VqM98XiIH7VBGVoxVSc7" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/8988cd1b75.js" crossorigin="anonymous"></script>
    <script src="../js/header/header.js"></script>

    <script>

        window.onload = function doQuery() {
            status();
            $.ajax({
                method: "POST",
                url: "../php/news/callnews.php",
                data: {
                },
                dataType: "json",
                success: function (response) {
                    // console.log(response);
                    let date = response[0][1];
                    let title = response[0][2];
                    let content = response[0][3];
                    let img = response[0][4];
                    let block_10 = document.getElementById("block_10");
                    let str = `
                    <div class="left">
                        <p>${date}</p>
                        <h3>${title}</h3>
                        <p>${content}</p>
                        <a href="./news_in.html">
                            <p class="pp">
                                <閱讀更多>
                            </p>
                        </a>
                    </div>
                    <img src="../image/intro/${img}" class="fir1" alt="slide4">
                    `;

                    block_10.innerHTML = str;
                },
                error: function (exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });

            $.ajax({
                method: "POST",
                url: "../php/news/callnews.php",
                data: {
                },
                dataType: "json",
                success: function (response) {
                    // console.log(response);
                    let block_9 = document.getElementById("block_9");
                    //更新html內容(透過jQuery跑迴圈取值)
                    $.each(response, function (index, row) {
                        let str = ` 
                        <div class="sort" onclick="parseCookie(this)" value="${row.ARTICLEID}" >
                            <div class="wrap" >
                                    <img src="../image/intro/${row.AIMG}" class="sec" alt="slide4">
                                <div class="name" >
                                        <p >${row.ADATE}</p>
                                        <h3 class=h3>${row.TITLE}</h3>
                                        <p >${row.CONTENT}</p>
                                        <p class="p">閱讀更多></p>
                                </div>
                            </div>
                        </div>
                    `;
                        block_9.insertAdjacentHTML("beforeend", str);
                    });
                },
                error: function (exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });
        }

    </script>

    <script>

        function sort2() {
            $.ajax({
                method: "POST",
                url: "../php/news/callnews3.php",
                data: {
                },
                dataType: "json",
                success: function (response) {
                    // console.log(response);
                    let block_9 = document.getElementById("block_9");
                    block_9.innerHTML = "";

                    //更新html內容(透過jQuery跑迴圈取值)
                    $.each(response, function (index, row) {
                        let str = ` 
                        <div class="sort" onclick="parseCookie(this)" value="${row.ARTICLEID}" >
                            <div class="wrap" >
                                    <img src="../image/intro/${row.AIMG}" class="sec" alt="slide4">
                                <div class="name" >
                                        <p >${row.ADATE}</p>
                                        <h3 class=h3>${row.TITLE}</h3>
                                        <p >${row.CONTENT}</p>
                                        <p class="p">閱讀更多></p>
                                </div>
                            </div>
                        </div>
                    `;
                        block_9.insertAdjacentHTML("beforeend", str);
                    });
                },
                error: function (exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });
        }


        function sort() {
            $.ajax({
                method: "POST",
                url: "../php/news/callnews.php",
                data: {
                },
                dataType: "json",
                success: function (response) {
                    // console.log(response);
                    let block_9 = document.getElementById("block_9");
                    block_9.innerHTML = "";

                    //更新html內容(透過jQuery跑迴圈取值)
                    $.each(response, function (index, row) {
                        let str = ` 
                        <div class="sort" onclick="parseCookie(this)" value="${row.ARTICLEID}" >
                            <div class="wrap" >
                                    <img src="../image/intro/${row.AIMG}" class="sec" alt="slide4">
                                <div class="name" >
                                        <p >${row.ADATE}</p>
                                        <h3 class=h3>${row.TITLE}</h3>
                                        <p >${row.CONTENT}</p>
                                        <p class="p">閱讀更多></p>
                                </div>
                            </div>
                        </div>
                    `;
                        block_9.insertAdjacentHTML("beforeend", str);
                    });
                },
                error: function (exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });
        }

    </script>




</head>

<body>

    <div class="otot"></div>

    <!-- 首頁nav -->
<header id="header">
    <div class="container">
        <a class="logo" href="../html/index.html">
            <img src="../image/index/logo.png" alt="logoImg">
        </a>
        <nav class="navbar">
            <ul>
                <a href="../html/Intro.html">
                    <li>
                        <img src="../image/index/pic.png">
                        消息/介紹
                    </li>
                </a>
                <a href="../html/Gacha.html">
                    <li>
                        <img src="../image/index/pokemon.png">
                        角色抽取
                    </li>
                </a>
                <a href="../html/trade.html">
                    <li>
                        <img src="../image/index/role01.png">
                        角色交易
                    </li>
                </a>
            </ul>
        </nav>

        <!-- phone nav-->
        <nav class="hamburger">
            <div id="menuToggle">
                <input type="checkbox" />

                <span></span>
                <span></span>
                <span></span>

                <ul id="headerMenu">
                    <a href="../html/index.html"><img src="../image/index/logo.png"></a>
                    <a href="../html/Intro.html">
                        <li><img src="../image/index/pic.png">消息/介紹</li>
                    </a>
                    <a href="../html/Gacha.html">
                        <li><img src="../image/index/pokemon.png">角色抽取</li>
                    </a>
                    <a href="../html/trade.html">
                        <li><img src="../image/index/role01.png">角色交易</li>
                    </a>
                    <a href="#">
                        <div class="hamLog " id="LogOutPhone" onclick="LogOut()">登出</div>
                    </a>
                    <a href="#">
                        <div class="hamLog logbt LogInPhone" id="LogInPhone" onclick="LogIn()">登入</div>
                    </a>
                </ul>
            </div>
        </nav>
        <!-- phone nav end -->

        <div class="icon">
            <botton type="button" class="button disappear" id="appear1">
                <a href="../html/deposit.html"><i class="fas fa-coins fa-2x"></i></a>
                <p id="headerResult"></p>
                <div class="show">儲值</div>
            </botton>
            <botton type="button" class="button disappear" id="appear2">
                <a href="../html/collection.html"><i class="fab fa-gratipay fa-2x"></i></a>
                <div class="show">收藏</div>
            </botton>
            <botton type="button" class="button" onclick="memberCheck()">
                <a href="#"><i class="fas fa-user-circle fa-2x"></i>
                    <h5 id="headerCountResult" class="countResul _off"></h5>
                </a>
                <div class="show">會員</div>
            </botton>
            <botton type="button" id="LogOut" class="LogOut" onclick="LogOut()">
                <a href="#">登出</a>
            </botton>
            <botton type="button" id="LogIn" class="LogIn logbt" onclick="LogIn()">
                <a href="#">登入</a>
            </botton>
        </div>
    </div>
</header>
    <div class="out">
        <main class="mama">
            <p class="p">首頁>消息/介紹>所有消息</p>
            <section>
                <h1>所有消息</h1>
                <div class="content" id="block_10">
                    <!-- <div class="left">
                        <p>2022年2月1號</p>
                        <h3>《怪哩怪汽》未來計畫揭露，第二年內容公布！</h3>
                        <p>即將發佈「全新VR賽道」和全新《發現之旅》，還有更多值得期待的內容。</p>
                        <a href="./news_in.html">
                            <p class="pp">
                                <閱讀更多>
                            </p>
                        </a>
                    </div>
                    <img src="../image/intro/1010.jpg" class="fir1" alt="slide4"> -->
                </div>
            </section>
        </main>


        <div id="content">
            <div id="block_1">

                <div class="search-form">
                    <div style="display:flex;" class="searsear">
                        <h3>文章搜尋：</h3>
                        <input id="search-input" onkeyup="find()" name="search-input" type="text" placeholder="關鍵字搜尋"
                            style="outline: none;" />
                        <style id="m-search"></style>
                    </div>
                </div>

                <div class="buttons">
                    <button id="bbbn" class="btn old bbbn" onclick="sort2()">按時間排序由舊至新</button>
                    <button id="bbbn2" class="btn old bbbn2" onclick="sort()">按時間排序由新至舊</button>
                </div>

                <div id="block_9"></div>

            </div>
        </div>

        <section class="section_news">
            <button id="bnbn">沒有更多內容了</button>
        </section>


    </div>

    <div class="upup">
        <i class="fas fa-arrow-circle-up totop"></i>
    </div>


    <!-- footer -->
<footer class="footer">
    <div class="iconLink">
        <a href="#"><i class="fab fa-facebook-square fa-2x i"></i></a>
        <a href="#"><i class="fab fa-instagram fa-2x"></i></a>
        <a href="#"><i class="fab fa-twitter-square fa-2x i"></i></a>
    </div>
    <div class="notice">
        <p>
            本網站為緯育TibaMe前端設計工程師班第70期第一組學員專題成果作品，本平台僅供學習、展示之用。<br>
            參考資源： 馬力歐賽車、NFT。若有侵權疑慮，您可以私訊 [ 緯育TibaMe ]，後續會由專人協助處理
        </p>
    </div>
    <div class="copyright">
        <p><i class="far fa-copyright"></i> 2021 怪哩怪汽 All Rights Reserved</p>
    </div>
</footer>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/aos/3.0.0-beta.6/aos.js"></script>
    <script>AOS.init();</script>
    <script src="../js/vendor/slick-1.8.1/slick/slick.min.js"></script>
    <script src="../js/vendor/slick-1.8.1/slick/slick.js"></script>
    <script src="../js/news/news.js"></script>


    <script>
        function find() {
            // 綁定input標籤的變數
            let findvalue = document.getElementById('search-input').value
            $.ajax({
                method: "POST",
                url: "../php/news/callnews1.php",
                // php 跟 ajax交流
                data: {
                    find: findvalue,
                },
                dataType: "json",
                success: function (response) {
                    //更新html內容(透過jQuery跑迴圈取值)
                    let block_9 = document.getElementById("block_9");
                    // 先清空資料
                    block_9.innerHTML = "";
                    $.each(response, function (index, row) {
                        let str = ` 
                        <div class="sort" >
                            <div class="wrap" >
                                    <img src="../image/intro/${row.AIMG}" class="sec" alt="slide4">
                                <div class="name" >
                                        <p class="p">${row.ADATE}</p>
                                        <h3>${row.TITLE}</h3>
                                        <p class="p">${row.CONTENT}</p>
                                        <p >閱讀更多></p>   
                                </div>
                            </div>
                        </div>
                    `;
                        block_9.insertAdjacentHTML("beforeend", str);
                    });
                },
                error: function (exception) {
                    alert("發生錯誤: " + exception.status);
                }
            });
        }
    </script>


    <script>
        function parseCookie(item) {
            // console.log(item.childNodes[1].childNodes[3].childNodes[3].innerText);
            let title = item.childNodes[1].childNodes[3].childNodes[3].innerText;
            sessionStorage.setItem('title', title);
            location.href = "./news_in.html";
        }



    </script>

</body>

</html>